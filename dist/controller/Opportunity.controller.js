sap.ui.define(["./BaseController","sap/ui/core/library","sap/m/MessageBox","com/zeffortcalculator/model/models"],function(e,t,o,r){"use strict";const{BusyIndicator:s}=t;return e.extend("com.zeffortcalculator.controller.Opportunity",{onInit:function(){this.getView().addEventDelegate({onBeforeShow:()=>{this.getOwnerModel("oModelEstCal").destroy();this.setOwnerModel(r.getEcInputModel(this.getOwnerModel()),"oModelEstCal");this.getView().byId("radio_L").setSelected(false);this.getView().byId("radio_U").setSelected(false);this.getView().byId("radio_C").setSelected(false)},onAfterShow:()=>{this.getView().byId("hclImg").attachPress(()=>{this.onHome()})}})},onWorkpackage:function(e,t){if(t){this.getOwnerModel("oModelEstCal").setProperty("/OppType",t)}},onSpecialCharacterCheck:function(e){if(!this.specialCharacterCheck(e.getSource().getValue())){e.getSource().setValue(e.getSource().getValue().replace(/[^a-zA-Z0-9]/g,"").trim())}},onOpportunitysubmit:function(){let e={CustId:this.getOwnerModel("oModelEstCal").getProperty("/CustId").trim(),OppType:this.getOwnerModel("oModelEstCal").getProperty("/OppType").trim(),CustName:this.getOwnerModel("oModelEstCal").getProperty("/CustName").trim(),OppName:this.getOwnerModel("oModelEstCal").getProperty("/OppName").trim()};if(e.CustId.trim()&&e.CustName.trim()&&e.OppName.trim()&&e.OppType.trim()){s.show();let t=this.callBackEnd("/zi_hcl_opp_custom","POST",[],e);t.then(e=>{let t=e.data;this.getOwnerModel("oModelEstCal").setProperty("/OpportunityId",t.OpportunityId);this.getOwnerModel("oModelEstCal").setProperty("/Version",t.Version);s.hide();if(JSON.parse(e.headers["sap-message"])?.severity=="error"){o.error(JSON.parse(e.headers["sap-message"]).message,{actions:[o.Action.OK],emphasizedAction:o.Action.OK,onClose:()=>{}});return}o.information("Opportunity ID "+t.OpportunityId+" has been created for future reference",{actions:[o.Action.OK],emphasizedAction:o.Action.OK,onClose:()=>{this.getRouter().navTo("Calculate",{},false);return}})}).catch(e=>{o.error(JSON.stringify(e));s.hide()})}else{o.error("Please enter all the required fields")}}})});
//# sourceMappingURL=Opportunity.controller.js.map