sap.ui.define(["./BaseController","sap/ui/core/library","sap/ui/export/library","../utils/formatter"],function(e,t,r,a){"use strict";const i=r.EdmType;const{BusyIndicator:o}=t;return e.extend("com.zeffortcalculator.controller.Detail",{formatter:a,onInit:function(){this.getView().addEventDelegate({onAfterShow:()=>{this.getView().byId("hclImg").attachPress(()=>{this.onHome()})}});this.getRouter().getRoute("Detail").attachPatternMatched(this.onDetailMatched,this);this.getView().byId("detailEdit").setVisible(true)},onEdit:function(e){this.getOwnerModel("oModelEstCal").setProperty("/SaveOrEdit",e);this.getRouter().navTo("Calculate",{},false)},onSearchCust:function(){this.getRouter().navTo("Search",{OpportunityId:this.getOwnerModel("oModelEstCal").getProperty("/OpportunityId")},false)},onDetailMatched:function(e){if(this.getView().byId("detailSave"))this.getView().byId("detailSave").setVisible(true);if(e.getParameter("arguments").CustId&&e.getParameter("arguments").OpportunityId&&e.getParameter("arguments").Version){if(this.getView().byId("detailSave"))this.getView().byId("detailSave").setVisible(false);let t=[this.createFilter("CustId",e.getParameter("arguments").CustId),this.createFilter("OpportunityId",e.getParameter("arguments").OpportunityId),this.createFilter("Version",e.getParameter("arguments").Version)];o.show();let r=this.callBackEnd("/zi_hcl_header","GET",t,{},{});r.then(e=>{let t=e.data;this.getOwnerModel("oModelEstCal").setData({});this.getOwnerModel("oModelEstCal").setData(t.results[0]);o.hide()}).catch(e=>{o.hide();console.log(e)})}},onInputOutputExport:function(){let e="Input Output";let t=this.getOwnerModel("oModelEstCal").getData();let r=this.getOwnerModel("remotei18n").getData();let a=`${this.getOwnerModel().sServiceUrl}/zi_hcl_header?$filter=CustId eq '${t.CustId}' and OpportunityId eq '${t.OpportunityId}' and Version eq '${t.Version}'`;let o={type:"odata",dataUrl:a,serviceUrl:this.getOwnerModel().sServiceUrl,useBatch:true};let l=[{label:r.DP.DB_SIZE,property:"SsDbSize",type:i.String},{label:r.DP.NOC,property:"NoOfCycles",type:i.Number},{label:r.DP.HC_FM,property:"HighComplexFm",type:i.Number},{label:r.DP.MC_FM,property:"MedComplexFm",type:i.Number},{label:r.DP.SC_FM,property:"SimComplexFm",type:i.Number},{label:r.DP.ATC_VC,property:"AtcViolCount",type:i.Number},{label:r.DP.FIORI_STD_APP_C,property:"FioriStdAppCount",type:i.Number},{label:r.DP.FIORI_SEC_CAT_ROLE,property:"FioriSecCatRole",type:i.Number},{label:r.DP.SEC_MROLE,property:"SecMasterRole",type:i.Number},{label:r.DP.IC,property:"InterfaceCount",type:i.Number},{label:r.DP.COMMENTS,property:"Comments",type:i.String}];this.onCommonExport(o,l,e)}})});
//# sourceMappingURL=Detail.controller.js.map